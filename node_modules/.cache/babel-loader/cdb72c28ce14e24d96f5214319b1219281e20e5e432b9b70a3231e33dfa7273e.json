{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\josep\\\\Documents\\\\Sistema de Encuestas por Voz\\\\client\\\\src\\\\pages\\\\TakeSurvey.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\n\n// Mock data - would be replaced with API calls in production\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst mockSurveys = [{\n  id: 'survey-1',\n  title: 'Satisfacción del Cliente',\n  description: 'Encuesta para medir la satisfacción con nuestros servicios',\n  welcomeMessage: '¡Hola! Gracias por participar en nuestra encuesta sobre satisfacción del cliente. Sus respuestas nos ayudarán a mejorar nuestros servicios.',\n  farewell: 'Gracias por completar la encuesta. ¡Sus respuestas son muy valiosas para nosotros!',\n  questions: [{\n    id: 'q1',\n    text: '¿Cómo calificaría nuestro servicio en una escala del 1 al 5, donde 1 es muy malo y 5 es excelente?',\n    type: 'rating'\n  }, {\n    id: 'q2',\n    text: '¿Recomendaría nuestro servicio a otras personas?',\n    type: 'yesno'\n  }, {\n    id: 'q3',\n    text: '¿Qué aspectos podríamos mejorar?',\n    type: 'open'\n  }]\n}, {\n  id: 'survey-2',\n  title: 'Experiencia de Usuario',\n  description: 'Evaluación de la experiencia con nuestra nueva plataforma',\n  welcomeMessage: '¡Hola! Gracias por participar en nuestra encuesta sobre experiencia de usuario. Sus respuestas nos ayudarán a mejorar nuestra plataforma.',\n  farewell: 'Gracias por completar la encuesta. ¡Su opinión es muy importante para nosotros!',\n  questions: [{\n    id: 'q1',\n    text: '¿Fue fácil navegar por nuestra plataforma?',\n    type: 'yesno'\n  }, {\n    id: 'q2',\n    text: '¿Qué características le gustaría ver en nuestra plataforma?',\n    type: 'open'\n  }]\n}, {\n  id: 'survey-3',\n  title: 'Feedback de Producto',\n  description: 'Recopilación de opiniones sobre nuestro último lanzamiento',\n  welcomeMessage: '¡Hola! Gracias por participar en nuestra encuesta sobre nuestro nuevo producto. Sus respuestas nos ayudarán a mejorar.',\n  farewell: 'Gracias por completar la encuesta. ¡Su opinión nos ayudará a mejorar nuestros productos!',\n  questions: [{\n    id: 'q1',\n    text: '¿Cómo calificaría nuestro nuevo producto en una escala del 1 al 5?',\n    type: 'rating'\n  }]\n}];\nconst TakeSurvey = () => {\n  _s();\n  const {\n    surveyId\n  } = useParams();\n  const navigate = useNavigate();\n  const [survey, setSurvey] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [currentStep, setCurrentStep] = useState('welcome'); // welcome, name, questions, thanks\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [userName, setUserName] = useState('');\n  const [responses, setResponses] = useState([]);\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [isListening, setIsListening] = useState(false);\n  const [transcript, setTranscript] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n\n  // References\n  const recognitionRef = useRef(null);\n  const synthRef = useRef(window.speechSynthesis);\n\n  // Get survey data\n  useEffect(() => {\n    const fetchSurvey = async () => {\n      try {\n        // Simulate API call\n        setTimeout(() => {\n          const foundSurvey = mockSurveys.find(s => s.id === surveyId);\n          if (foundSurvey) {\n            setSurvey(foundSurvey);\n            // Initialize responses array\n            setResponses(foundSurvey.questions.map(() => ({\n              value: '',\n              timestamp: null\n            })));\n          }\n          setLoading(false);\n        }, 1000);\n      } catch (error) {\n        console.error('Error fetching survey:', error);\n        setErrorMessage('Error al cargar la encuesta. Por favor, intente nuevamente.');\n        setLoading(false);\n      }\n    };\n    fetchSurvey();\n  }, [surveyId]);\n\n  // Initialize speech recognition\n  useEffect(() => {\n    // Check if browser supports SpeechRecognition\n    if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {\n      setErrorMessage('Su navegador no soporta reconocimiento de voz. Por favor, use un navegador compatible como Chrome, Edge o Safari.');\n      return;\n    }\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    recognitionRef.current = new SpeechRecognition();\n    recognitionRef.current.continuous = false;\n    recognitionRef.current.lang = 'es-ES';\n    recognitionRef.current.interimResults = false;\n    recognitionRef.current.maxAlternatives = 1;\n    recognitionRef.current.onresult = event => {\n      const result = event.results[0][0].transcript;\n      setTranscript(result);\n      processResponse(result);\n    };\n    recognitionRef.current.onerror = event => {\n      console.error('Speech recognition error', event.error);\n      setIsListening(false);\n      if (event.error === 'no-speech') {\n        setErrorMessage('No se detectó ninguna voz. Por favor, intente de nuevo.');\n      } else {\n        setErrorMessage('Error en el reconocimiento de voz. Por favor, intente de nuevo.');\n      }\n    };\n    recognitionRef.current.onend = () => {\n      setIsListening(false);\n    };\n\n    // Clean up\n    return () => {\n      if (recognitionRef.current) {\n        recognitionRef.current.abort();\n      }\n      if (synthRef.current) {\n        synthRef.current.cancel();\n      }\n    };\n  }, []);\n\n  // Start the survey when loaded\n  useEffect(() => {\n    if (survey && currentStep === 'welcome') {\n      speak(survey.welcomeMessage, () => {\n        setTimeout(() => {\n          setCurrentStep('name');\n          speak('¿Podría decirme su nombre, por favor?');\n        }, 500);\n      });\n    }\n  }, [survey, currentStep]);\n\n  // Process when current step changes\n  useEffect(() => {\n    if (currentStep === 'questions' && survey) {\n      askCurrentQuestion();\n    } else if (currentStep === 'thanks' && survey) {\n      speak(survey.farewell, () => {\n        // Here would be where we send the responses to the backend in a real app\n        console.log('Survey completed with responses:', responses);\n      });\n    }\n  }, [currentStep, currentQuestionIndex, survey]);\n\n  // Function to speak text\n  const speak = (text, onEnd = () => {}) => {\n    if (!synthRef.current) return;\n\n    // Cancel any ongoing speech\n    synthRef.current.cancel();\n    setIsSpeaking(true);\n    const utterance = new SpeechSynthesisUtterance(text);\n    utterance.lang = 'es-ES';\n    utterance.rate = 1;\n    utterance.pitch = 1;\n    utterance.onend = () => {\n      setIsSpeaking(false);\n      onEnd();\n    };\n    synthRef.current.speak(utterance);\n  };\n\n  // Function to start listening\n  const startListening = () => {\n    if (!recognitionRef.current) return;\n    setErrorMessage('');\n    setTranscript('');\n    setIsListening(true);\n    try {\n      recognitionRef.current.start();\n    } catch (error) {\n      console.error('Error starting recognition', error);\n    }\n  };\n\n  // Function to stop listening\n  const stopListening = () => {\n    if (!recognitionRef.current) return;\n    setIsListening(false);\n    try {\n      recognitionRef.current.stop();\n    } catch (error) {\n      console.error('Error stopping recognition', error);\n    }\n  };\n\n  // Function to process user's response\n  const processResponse = text => {\n    if (currentStep === 'name') {\n      setUserName(text);\n      speak(`Gracias, ${text}. Vamos a empezar con la encuesta \"${survey.title}\".`, () => {\n        setTimeout(() => {\n          setCurrentStep('questions');\n        }, 500);\n      });\n    } else if (currentStep === 'questions') {\n      const currentQuestion = survey.questions[currentQuestionIndex];\n\n      // Process response based on question type\n      if (currentQuestion.type === 'rating') {\n        // Extract number from response\n        const rating = text.match(/\\d+/);\n        if (rating && rating[0] >= 1 && rating[0] <= 5) {\n          saveResponse(rating[0]);\n        } else {\n          speak('Por favor, responda con un número del 1 al 5.', startListening);\n          return;\n        }\n      } else if (currentQuestion.type === 'yesno') {\n        // Check for yes/no in response\n        const lowerText = text.toLowerCase();\n        if (lowerText.includes('sí') || lowerText.includes('si') || lowerText.includes('claro') || lowerText.includes('por supuesto')) {\n          saveResponse('Sí');\n        } else if (lowerText.includes('no')) {\n          saveResponse('No');\n        } else {\n          speak('Por favor, responda con sí o no.', startListening);\n          return;\n        }\n      } else {\n        // Open question\n        saveResponse(text);\n      }\n    }\n  };\n\n  // Function to save response and move to next question\n  const saveResponse = value => {\n    const updatedResponses = [...responses];\n    updatedResponses[currentQuestionIndex] = {\n      value,\n      timestamp: new Date().toISOString()\n    };\n    setResponses(updatedResponses);\n\n    // Check if there are more questions\n    if (currentQuestionIndex < survey.questions.length - 1) {\n      setCurrentQuestionIndex(currentQuestionIndex + 1);\n    } else {\n      // End of survey\n      setCurrentStep('thanks');\n    }\n  };\n\n  // Function to ask the current question\n  const askCurrentQuestion = () => {\n    if (!survey || currentQuestionIndex >= survey.questions.length) return;\n    const question = survey.questions[currentQuestionIndex];\n    speak(question.text, startListening);\n  };\n\n  // Handle microphone button click\n  const handleMicrophoneClick = () => {\n    if (isListening) {\n      stopListening();\n    } else {\n      startListening();\n    }\n  };\n\n  // Check browser compatibility\n  const checkBrowserCompatibility = () => {\n    const isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n    const isEdge = /Edg/.test(navigator.userAgent);\n    const isSafari = /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent);\n    return isChrome || isEdge || isSafari;\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center my-12\",\n      children: /*#__PURE__*/_jsxDEV(\"svg\", {\n        className: \"animate-spin h-8 w-8 text-primary-500\",\n        xmlns: \"http://www.w3.org/2000/svg\",\n        fill: \"none\",\n        viewBox: \"0 0 24 24\",\n        children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n          className: \"opacity-25\",\n          cx: \"12\",\n          cy: \"12\",\n          r: \"10\",\n          stroke: \"currentColor\",\n          strokeWidth: \"4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          className: \"opacity-75\",\n          fill: \"currentColor\",\n          d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 7\n    }, this);\n  }\n  if (!survey) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card text-center py-12\",\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        className: \"h-16 w-16 mx-auto text-gray-400 mb-4\",\n        fill: \"none\",\n        viewBox: \"0 0 24 24\",\n        stroke: \"currentColor\",\n        children: /*#__PURE__*/_jsxDEV(\"path\", {\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          strokeWidth: 2,\n          d: \"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium text-gray-800 mb-2\",\n        children: \"Encuesta no encontrada\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 mb-6\",\n        children: \"La encuesta que est\\xE1s buscando no existe o ha sido eliminada.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/'),\n        className: \"btn btn-primary\",\n        children: \"Volver al Inicio\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 7\n    }, this);\n  }\n  if (!checkBrowserCompatibility()) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card text-center py-12\",\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        className: \"h-16 w-16 mx-auto text-orange-400 mb-4\",\n        fill: \"none\",\n        viewBox: \"0 0 24 24\",\n        stroke: \"currentColor\",\n        children: /*#__PURE__*/_jsxDEV(\"path\", {\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          strokeWidth: 2,\n          d: \"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium text-gray-800 mb-2\",\n        children: \"Navegador no compatible\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 mb-6\",\n        children: \"Esta aplicaci\\xF3n requiere un navegador compatible con la API de Reconocimiento de Voz. Por favor, utilice Chrome, Edge o Safari para continuar.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.location.reload(),\n        className: \"btn btn-primary\",\n        children: \"Intentar Nuevamente\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-2xl mx-auto text-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold mb-2\",\n        children: survey.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this), survey.description && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 mb-6\",\n        children: survey.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 32\n      }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\",\n        children: errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-8\",\n        children: [currentStep === 'welcome' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-lg\",\n          children: \"Iniciando encuesta...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 13\n        }, this), currentStep === 'name' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-lg\",\n          children: \"\\xBFPodr\\xEDa decirme su nombre, por favor?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 13\n        }, this), currentStep === 'questions' && survey.questions[currentQuestionIndex] && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-500 mb-2\",\n            children: [\"Pregunta \", currentQuestionIndex + 1, \" de \", survey.questions.length]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-lg font-medium mb-4\",\n            children: survey.questions[currentQuestionIndex].text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 15\n          }, this), survey.questions[currentQuestionIndex].type === 'rating' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-center space-x-2 mb-4\",\n            children: [1, 2, 3, 4, 5].map(num => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"w-10 h-10 rounded-full bg-gray-200 hover:bg-primary-100 flex items-center justify-center\",\n              onClick: () => processResponse(num.toString()),\n              children: num\n            }, num, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 17\n          }, this), survey.questions[currentQuestionIndex].type === 'yesno' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-center space-x-4 mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-outline px-8\",\n              onClick: () => processResponse('No'),\n              children: \"No\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary px-8\",\n              onClick: () => processResponse('Sí'),\n              children: \"S\\xED\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 13\n        }, this), currentStep === 'thanks' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-lg\",\n          children: survey.farewell\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this), transcript && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-100 p-4 rounded-lg mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-500 mb-1\",\n          children: \"Tu respuesta:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-lg\",\n          children: transcript\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `w-20 h-20 rounded-full flex items-center justify-center transition-colors ${isListening ? 'bg-red-500 text-white animate-pulse' : isSpeaking ? 'bg-gray-300 text-gray-600 cursor-not-allowed' : 'bg-primary-500 text-white hover:bg-primary-600'}`,\n          onClick: handleMicrophoneClick,\n          disabled: isSpeaking || currentStep === 'welcome' || currentStep === 'thanks',\n          title: isListening ? 'Detener grabación' : 'Iniciar grabación',\n          children: isListening ? /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            className: \"h-8 w-8\",\n            fill: \"none\",\n            viewBox: \"0 0 24 24\",\n            stroke: \"currentColor\",\n            children: [/*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            className: \"h-8 w-8\",\n            fill: \"none\",\n            viewBox: \"0 0 24 24\",\n            stroke: \"currentColor\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 9\n      }, this), currentStep === 'questions' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full bg-gray-200 rounded-full h-2.5\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-primary-500 h-2.5 rounded-full\",\n            style: {\n              width: `${currentQuestionIndex / survey.questions.length * 100}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-gray-500 mt-2\",\n          children: [currentQuestionIndex, \" de \", survey.questions.length, \" preguntas completadas\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 11\n      }, this), currentStep === 'thanks' && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/'),\n        className: \"btn btn-primary mt-6\",\n        children: \"Volver al Inicio\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-50 p-4 rounded-lg text-sm text-gray-600\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"font-medium mb-2\",\n        children: \"Instrucciones:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"list-disc list-inside space-y-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Haga clic en el bot\\xF3n del micr\\xF3fono para comenzar a hablar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Responda claramente a las preguntas cuando se le indique\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Para preguntas de calificaci\\xF3n, responda con un n\\xFAmero del 1 al 5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Para preguntas de s\\xED/no, responda con \\\"s\\xED\\\" o \\\"no\\\"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Tambi\\xE9n puede usar los botones en pantalla para responder\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 488,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 357,\n    columnNumber: 5\n  }, this);\n};\n_s(TakeSurvey, \"xNy1TqztUhjH/b5Xis5YEEz75bQ=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = TakeSurvey;\nexport default TakeSurvey;\nvar _c;\n$RefreshReg$(_c, \"TakeSurvey\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useNavigate","jsxDEV","_jsxDEV","mockSurveys","id","title","description","welcomeMessage","farewell","questions","text","type","TakeSurvey","_s","surveyId","navigate","survey","setSurvey","loading","setLoading","currentStep","setCurrentStep","currentQuestionIndex","setCurrentQuestionIndex","userName","setUserName","responses","setResponses","isSpeaking","setIsSpeaking","isListening","setIsListening","transcript","setTranscript","errorMessage","setErrorMessage","recognitionRef","synthRef","window","speechSynthesis","fetchSurvey","setTimeout","foundSurvey","find","s","map","value","timestamp","error","console","SpeechRecognition","webkitSpeechRecognition","current","continuous","lang","interimResults","maxAlternatives","onresult","event","result","results","processResponse","onerror","onend","abort","cancel","speak","askCurrentQuestion","log","onEnd","utterance","SpeechSynthesisUtterance","rate","pitch","startListening","start","stopListening","stop","currentQuestion","rating","match","saveResponse","lowerText","toLowerCase","includes","updatedResponses","Date","toISOString","length","question","handleMicrophoneClick","checkBrowserCompatibility","isChrome","test","navigator","userAgent","vendor","isEdge","isSafari","className","children","xmlns","fill","viewBox","cx","cy","r","stroke","strokeWidth","fileName","_jsxFileName","lineNumber","columnNumber","d","strokeLinecap","strokeLinejoin","onClick","location","reload","num","toString","disabled","style","width","_c","$RefreshReg$"],"sources":["C:/Users/josep/Documents/Sistema de Encuestas por Voz/client/src/pages/TakeSurvey.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\n\n// Mock data - would be replaced with API calls in production\nconst mockSurveys = [\n  {\n    id: 'survey-1',\n    title: 'Satisfacción del Cliente',\n    description: 'Encuesta para medir la satisfacción con nuestros servicios',\n    welcomeMessage: '¡Hola! Gracias por participar en nuestra encuesta sobre satisfacción del cliente. Sus respuestas nos ayudarán a mejorar nuestros servicios.',\n    farewell: 'Gracias por completar la encuesta. ¡Sus respuestas son muy valiosas para nosotros!',\n    questions: [\n      {\n        id: 'q1',\n        text: '¿Cómo calificaría nuestro servicio en una escala del 1 al 5, donde 1 es muy malo y 5 es excelente?',\n        type: 'rating'\n      },\n      {\n        id: 'q2',\n        text: '¿Recomendaría nuestro servicio a otras personas?',\n        type: 'yesno'\n      },\n      {\n        id: 'q3',\n        text: '¿Qué aspectos podríamos mejorar?',\n        type: 'open'\n      }\n    ]\n  },\n  {\n    id: 'survey-2',\n    title: 'Experiencia de Usuario',\n    description: 'Evaluación de la experiencia con nuestra nueva plataforma',\n    welcomeMessage: '¡Hola! Gracias por participar en nuestra encuesta sobre experiencia de usuario. Sus respuestas nos ayudarán a mejorar nuestra plataforma.',\n    farewell: 'Gracias por completar la encuesta. ¡Su opinión es muy importante para nosotros!',\n    questions: [\n      {\n        id: 'q1',\n        text: '¿Fue fácil navegar por nuestra plataforma?',\n        type: 'yesno'\n      },\n      {\n        id: 'q2',\n        text: '¿Qué características le gustaría ver en nuestra plataforma?',\n        type: 'open'\n      }\n    ]\n  },\n  {\n    id: 'survey-3',\n    title: 'Feedback de Producto',\n    description: 'Recopilación de opiniones sobre nuestro último lanzamiento',\n    welcomeMessage: '¡Hola! Gracias por participar en nuestra encuesta sobre nuestro nuevo producto. Sus respuestas nos ayudarán a mejorar.',\n    farewell: 'Gracias por completar la encuesta. ¡Su opinión nos ayudará a mejorar nuestros productos!',\n    questions: [\n      {\n        id: 'q1',\n        text: '¿Cómo calificaría nuestro nuevo producto en una escala del 1 al 5?',\n        type: 'rating'\n      }\n    ]\n  }\n];\n\nconst TakeSurvey = () => {\n  const { surveyId } = useParams();\n  const navigate = useNavigate();\n  const [survey, setSurvey] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [currentStep, setCurrentStep] = useState('welcome'); // welcome, name, questions, thanks\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [userName, setUserName] = useState('');\n  const [responses, setResponses] = useState([]);\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [isListening, setIsListening] = useState(false);\n  const [transcript, setTranscript] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n  \n  // References\n  const recognitionRef = useRef(null);\n  const synthRef = useRef(window.speechSynthesis);\n  \n  // Get survey data\n  useEffect(() => {\n    const fetchSurvey = async () => {\n      try {\n        // Simulate API call\n        setTimeout(() => {\n          const foundSurvey = mockSurveys.find(s => s.id === surveyId);\n          \n          if (foundSurvey) {\n            setSurvey(foundSurvey);\n            // Initialize responses array\n            setResponses(foundSurvey.questions.map(() => ({ value: '', timestamp: null })));\n          }\n          \n          setLoading(false);\n        }, 1000);\n      } catch (error) {\n        console.error('Error fetching survey:', error);\n        setErrorMessage('Error al cargar la encuesta. Por favor, intente nuevamente.');\n        setLoading(false);\n      }\n    };\n\n    fetchSurvey();\n  }, [surveyId]);\n  \n  // Initialize speech recognition\n  useEffect(() => {\n    // Check if browser supports SpeechRecognition\n    if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {\n      setErrorMessage('Su navegador no soporta reconocimiento de voz. Por favor, use un navegador compatible como Chrome, Edge o Safari.');\n      return;\n    }\n    \n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    recognitionRef.current = new SpeechRecognition();\n    recognitionRef.current.continuous = false;\n    recognitionRef.current.lang = 'es-ES';\n    recognitionRef.current.interimResults = false;\n    recognitionRef.current.maxAlternatives = 1;\n    \n    recognitionRef.current.onresult = (event) => {\n      const result = event.results[0][0].transcript;\n      setTranscript(result);\n      processResponse(result);\n    };\n    \n    recognitionRef.current.onerror = (event) => {\n      console.error('Speech recognition error', event.error);\n      setIsListening(false);\n      if (event.error === 'no-speech') {\n        setErrorMessage('No se detectó ninguna voz. Por favor, intente de nuevo.');\n      } else {\n        setErrorMessage('Error en el reconocimiento de voz. Por favor, intente de nuevo.');\n      }\n    };\n    \n    recognitionRef.current.onend = () => {\n      setIsListening(false);\n    };\n    \n    // Clean up\n    return () => {\n      if (recognitionRef.current) {\n        recognitionRef.current.abort();\n      }\n      if (synthRef.current) {\n        synthRef.current.cancel();\n      }\n    };\n  }, []);\n  \n  // Start the survey when loaded\n  useEffect(() => {\n    if (survey && currentStep === 'welcome') {\n      speak(survey.welcomeMessage, () => {\n        setTimeout(() => {\n          setCurrentStep('name');\n          speak('¿Podría decirme su nombre, por favor?');\n        }, 500);\n      });\n    }\n  }, [survey, currentStep]);\n  \n  // Process when current step changes\n  useEffect(() => {\n    if (currentStep === 'questions' && survey) {\n      askCurrentQuestion();\n    } else if (currentStep === 'thanks' && survey) {\n      speak(survey.farewell, () => {\n        // Here would be where we send the responses to the backend in a real app\n        console.log('Survey completed with responses:', responses);\n      });\n    }\n  }, [currentStep, currentQuestionIndex, survey]);\n  \n  // Function to speak text\n  const speak = (text, onEnd = () => {}) => {\n    if (!synthRef.current) return;\n    \n    // Cancel any ongoing speech\n    synthRef.current.cancel();\n    \n    setIsSpeaking(true);\n    \n    const utterance = new SpeechSynthesisUtterance(text);\n    utterance.lang = 'es-ES';\n    utterance.rate = 1;\n    utterance.pitch = 1;\n    utterance.onend = () => {\n      setIsSpeaking(false);\n      onEnd();\n    };\n    \n    synthRef.current.speak(utterance);\n  };\n  \n  // Function to start listening\n  const startListening = () => {\n    if (!recognitionRef.current) return;\n    \n    setErrorMessage('');\n    setTranscript('');\n    setIsListening(true);\n    \n    try {\n      recognitionRef.current.start();\n    } catch (error) {\n      console.error('Error starting recognition', error);\n    }\n  };\n  \n  // Function to stop listening\n  const stopListening = () => {\n    if (!recognitionRef.current) return;\n    \n    setIsListening(false);\n    \n    try {\n      recognitionRef.current.stop();\n    } catch (error) {\n      console.error('Error stopping recognition', error);\n    }\n  };\n  \n  // Function to process user's response\n  const processResponse = (text) => {\n    if (currentStep === 'name') {\n      setUserName(text);\n      speak(`Gracias, ${text}. Vamos a empezar con la encuesta \"${survey.title}\".`, () => {\n        setTimeout(() => {\n          setCurrentStep('questions');\n        }, 500);\n      });\n    } else if (currentStep === 'questions') {\n      const currentQuestion = survey.questions[currentQuestionIndex];\n      \n      // Process response based on question type\n      if (currentQuestion.type === 'rating') {\n        // Extract number from response\n        const rating = text.match(/\\d+/);\n        if (rating && rating[0] >= 1 && rating[0] <= 5) {\n          saveResponse(rating[0]);\n        } else {\n          speak('Por favor, responda con un número del 1 al 5.', startListening);\n          return;\n        }\n      } else if (currentQuestion.type === 'yesno') {\n        // Check for yes/no in response\n        const lowerText = text.toLowerCase();\n        if (lowerText.includes('sí') || lowerText.includes('si') || lowerText.includes('claro') || lowerText.includes('por supuesto')) {\n          saveResponse('Sí');\n        } else if (lowerText.includes('no')) {\n          saveResponse('No');\n        } else {\n          speak('Por favor, responda con sí o no.', startListening);\n          return;\n        }\n      } else {\n        // Open question\n        saveResponse(text);\n      }\n    }\n  };\n  \n  // Function to save response and move to next question\n  const saveResponse = (value) => {\n    const updatedResponses = [...responses];\n    updatedResponses[currentQuestionIndex] = {\n      value,\n      timestamp: new Date().toISOString()\n    };\n    setResponses(updatedResponses);\n    \n    // Check if there are more questions\n    if (currentQuestionIndex < survey.questions.length - 1) {\n      setCurrentQuestionIndex(currentQuestionIndex + 1);\n    } else {\n      // End of survey\n      setCurrentStep('thanks');\n    }\n  };\n  \n  // Function to ask the current question\n  const askCurrentQuestion = () => {\n    if (!survey || currentQuestionIndex >= survey.questions.length) return;\n    \n    const question = survey.questions[currentQuestionIndex];\n    speak(question.text, startListening);\n  };\n  \n  // Handle microphone button click\n  const handleMicrophoneClick = () => {\n    if (isListening) {\n      stopListening();\n    } else {\n      startListening();\n    }\n  };\n  \n  // Check browser compatibility\n  const checkBrowserCompatibility = () => {\n    const isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n    const isEdge = /Edg/.test(navigator.userAgent);\n    const isSafari = /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent);\n    \n    return isChrome || isEdge || isSafari;\n  };\n  \n  if (loading) {\n    return (\n      <div className=\"flex justify-center my-12\">\n        <svg className=\"animate-spin h-8 w-8 text-primary-500\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n          <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n          <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n        </svg>\n      </div>\n    );\n  }\n  \n  if (!survey) {\n    return (\n      <div className=\"card text-center py-12\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-16 w-16 mx-auto text-gray-400 mb-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n        </svg>\n        <h3 className=\"text-lg font-medium text-gray-800 mb-2\">Encuesta no encontrada</h3>\n        <p className=\"text-gray-600 mb-6\">La encuesta que estás buscando no existe o ha sido eliminada.</p>\n        <button onClick={() => navigate('/')} className=\"btn btn-primary\">\n          Volver al Inicio\n        </button>\n      </div>\n    );\n  }\n  \n  if (!checkBrowserCompatibility()) {\n    return (\n      <div className=\"card text-center py-12\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-16 w-16 mx-auto text-orange-400 mb-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n        </svg>\n        <h3 className=\"text-lg font-medium text-gray-800 mb-2\">Navegador no compatible</h3>\n        <p className=\"text-gray-600 mb-6\">\n          Esta aplicación requiere un navegador compatible con la API de Reconocimiento de Voz.\n          Por favor, utilice Chrome, Edge o Safari para continuar.\n        </p>\n        <button onClick={() => window.location.reload()} className=\"btn btn-primary\">\n          Intentar Nuevamente\n        </button>\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"max-w-2xl mx-auto text-center\">\n      <div className=\"card mb-6\">\n        <h1 className=\"text-2xl font-bold mb-2\">{survey.title}</h1>\n        {survey.description && <p className=\"text-gray-600 mb-6\">{survey.description}</p>}\n        \n        {/* Display error message if there is one */}\n        {errorMessage && (\n          <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\n            {errorMessage}\n          </div>\n        )}\n        \n        {/* Current state display */}\n        <div className=\"mb-8\">\n          {currentStep === 'welcome' && (\n            <div className=\"text-lg\">Iniciando encuesta...</div>\n          )}\n          \n          {currentStep === 'name' && (\n            <div className=\"text-lg\">¿Podría decirme su nombre, por favor?</div>\n          )}\n          \n          {currentStep === 'questions' && survey.questions[currentQuestionIndex] && (\n            <div>\n              <div className=\"text-sm text-gray-500 mb-2\">\n                Pregunta {currentQuestionIndex + 1} de {survey.questions.length}\n              </div>\n              <div className=\"text-lg font-medium mb-4\">\n                {survey.questions[currentQuestionIndex].text}\n              </div>\n              \n              {survey.questions[currentQuestionIndex].type === 'rating' && (\n                <div className=\"flex justify-center space-x-2 mb-4\">\n                  {[1, 2, 3, 4, 5].map((num) => (\n                    <button\n                      key={num}\n                      className=\"w-10 h-10 rounded-full bg-gray-200 hover:bg-primary-100 flex items-center justify-center\"\n                      onClick={() => processResponse(num.toString())}\n                    >\n                      {num}\n                    </button>\n                  ))}\n                </div>\n              )}\n              \n              {survey.questions[currentQuestionIndex].type === 'yesno' && (\n                <div className=\"flex justify-center space-x-4 mb-4\">\n                  <button\n                    className=\"btn btn-outline px-8\"\n                    onClick={() => processResponse('No')}\n                  >\n                    No\n                  </button>\n                  <button\n                    className=\"btn btn-primary px-8\"\n                    onClick={() => processResponse('Sí')}\n                  >\n                    Sí\n                  </button>\n                </div>\n              )}\n            </div>\n          )}\n          \n          {currentStep === 'thanks' && (\n            <div className=\"text-lg\">{survey.farewell}</div>\n          )}\n        </div>\n        \n        {/* Voice transcript */}\n        {transcript && (\n          <div className=\"bg-gray-100 p-4 rounded-lg mb-6\">\n            <div className=\"text-sm text-gray-500 mb-1\">Tu respuesta:</div>\n            <div className=\"text-lg\">{transcript}</div>\n          </div>\n        )}\n        \n        {/* Microphone button */}\n        <div className=\"flex justify-center\">\n          <button\n            className={`w-20 h-20 rounded-full flex items-center justify-center transition-colors ${\n              isListening\n                ? 'bg-red-500 text-white animate-pulse'\n                : isSpeaking\n                ? 'bg-gray-300 text-gray-600 cursor-not-allowed'\n                : 'bg-primary-500 text-white hover:bg-primary-600'\n            }`}\n            onClick={handleMicrophoneClick}\n            disabled={isSpeaking || currentStep === 'welcome' || currentStep === 'thanks'}\n            title={isListening ? 'Detener grabación' : 'Iniciar grabación'}\n          >\n            {isListening ? (\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z\" />\n              </svg>\n            ) : (\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\" />\n              </svg>\n            )}\n          </button>\n        </div>\n        \n        {/* Progress indicators */}\n        {currentStep === 'questions' && (\n          <div className=\"mt-8\">\n            <div className=\"w-full bg-gray-200 rounded-full h-2.5\">\n              <div\n                className=\"bg-primary-500 h-2.5 rounded-full\"\n                style={{ width: `${((currentQuestionIndex) / survey.questions.length) * 100}%` }}\n              ></div>\n            </div>\n            <div className=\"text-xs text-gray-500 mt-2\">\n              {currentQuestionIndex} de {survey.questions.length} preguntas completadas\n            </div>\n          </div>\n        )}\n        \n        {/* Final actions */}\n        {currentStep === 'thanks' && (\n          <button\n            onClick={() => navigate('/')}\n            className=\"btn btn-primary mt-6\"\n          >\n            Volver al Inicio\n          </button>\n        )}\n      </div>\n      \n      {/* Instructions */}\n      <div className=\"bg-gray-50 p-4 rounded-lg text-sm text-gray-600\">\n        <h3 className=\"font-medium mb-2\">Instrucciones:</h3>\n        <ul className=\"list-disc list-inside space-y-1\">\n          <li>Haga clic en el botón del micrófono para comenzar a hablar</li>\n          <li>Responda claramente a las preguntas cuando se le indique</li>\n          <li>Para preguntas de calificación, responda con un número del 1 al 5</li>\n          <li>Para preguntas de sí/no, responda con \"sí\" o \"no\"</li>\n          <li>También puede usar los botones en pantalla para responder</li>\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default TakeSurvey;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}